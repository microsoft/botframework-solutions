
# Virtual Assistant Android Client Application

## Project Overview
### Diagram
![project overview diagram](/docs/media/android_project_overview.jpg)
### Description
- The User is able to interact with the bot via widgets on the home-screen or the main UI of the app.
- Optional: Bot responses can be broadcast to additional apps - these apps don't need to implement the SpeechSdk.
## Building the Project

### Prerequisites

1. [Create a Virtual Assistant](/docs/tutorials/csharp/virtualassistant.md) to setup your environment.

2. The [Speech enabling your Virtual Assistant](https://github.com/microsoft/botframework-solutions/blob/master/docs/howto/assistant/csharp/speechenablement.md) documentation covers the following two steps which you must perform to retrieve the Speech Cognitive Service Subscription Key and Speech Channel Secret Key.

- [Create a Speech Cognitive Service Key](https://github.com/microsoft/botframework-solutions/blob/master/docs/howto/assistant/csharp/speechenablement.md#create-a-microsoft-speech-instance)
- [Add the Speech Channel to your assistant](https://github.com/microsoft/botframework-solutions/blob/master/docs/howto/assistant/csharp/speechenablement.md#add-the-speech-channel-to-your-assistant)



### Step 1 - Credentials

Edit `DefaultConfiguration.java` to provide the *SPEECH_SERVICE_SUBSCRIPTION_KEY*, *DIRECT_LINE_SPEECH_SECRET_KEY* and *USER_FROM_ID* which will be used to perform speech operations and identify the user uniquely. 

![Android Studio showing credentials](/docs/media/android_studio_credentials_debug.png)
**Note:** that there are two versions, one for debug and one for release build flavors.

The USER_FROM_ID is a unique identifier for all messages generated by the user, this is typically combined with [Linked Accounts](https://github.com/microsoft/botframework-solutions/blob/master/docs/howto/assistant/linkedaccounts.md).

### Step 2 - Deploy
1. Select the desired build flavor (debug or release) and ensure credentials are set for the desired build flavor
2. Deploy to emulator or device

## Using the Project
### Running for First Time
- Accept the Record Audio permission to make voice requests from the bot. Without this permission, the user can only type requests to the Bot.
- Accept the Fine Location permission to easily make voice requests that are related to your GPS location, such as "find the nearest coffee shop". Without this permission, the user will be asked by the Bot to provide the current location.
- Slide away the service notification

### The UI
#### Main UI
![Main UI](/docs/media/android_screenshot_main_ui.png)
The Mic button is the only graphic immediately visible - press it to make a voice request. (The app will sense when you've finished speaking)
#### Navigation Bar
![Navigation Bar](/docs/media/android_screenshot_navbar.png)
The Navigation Drawer (on the left side of the screen) provides the following functionality:
- Settings
- Restart Conversation
- Show Assistant Settings
- Show Full Conversation
- Show Textinput
#### Settings
![Navigation Bar](/docs/media/android_screenshot_settings.png)
The DefaultConfiguration (see [Credentials](#step-1---credentials)) provides the initial data for this screen.
The user may edit the data and the changes are saved and used immediately.
**Note:** user-edited data is lost when the app is uninstalled

### Functionality Overview
#### Bot Configuration
The data on this screen is originally read from "DefaultConfiguration.java". Changing the values on this screen will update the stored data and used immediately.
NOTE: the stored data persists between app installs

#### Settings
Settings that are specific to the app can be set here

#### Restart Conversation
If the bot enters a problematic state, you can reset it.

#### Show Assistant Settings
Shortcut to the Android Assistant Settings

#### Show Full Conversation
Shows the users' requests on the right side of the UI

#### Show Textinput
Shows the text input field to make requests without needing to speak



